---
layout: default
title: Pipeline Schema
parent: Configurations
nav_order: 2
---

# Pipeline Schema

## Table of Contents
{: .no_toc .text-delta }

1. TOC
{:toc}

## Common Properties

The tasks definitions are listed inside the two keys `pipeline` and `tasks`:

```yaml
pipeline:
    tasks:
        --> here <--
```

| Property | Value 
|:----|:----|
| [`name`](#name) | text |
| [`parallelism`](#parallelism) | integer |
| [`reliability`](#reliability) | boolean |

#### name
{: .no_toc }

```yaml
pipeline:
    tasks:
    - name: task
```
It define the name of the implemented task

#### parallelism
{: .no_toc }

```yaml
pipeline:
    tasks:
    - name: task
      parallelism: 0
```
It represent the parallelism level of the task

#### reliability
{: .no_toc }

```yaml
pipeline:
  tasks:
    - name: task
      reliability: true
```
A boolean value that enables (if true) the message reliability mechanism of the platform in the current task.

Currently not available in `flink`.
{: .text-red-000 }

## Source Properties

The sources are the first tasks listed under the `tasks`tag. The properties of the data stream that generates are under the tag `synthetic`:

```yaml
pipeline:
  tasks:
    - name: source
      synthetic:
        --> here <--

workflow:
    ...
```

| Property | Value 
|:----|:----|
| `data:` | |
| &nbsp;&nbsp;&nbsp;&nbsp;[`size`](#size) | integer |
| &nbsp;&nbsp;&nbsp;&nbsp;[`values`](#values) | integer |
| &nbsp;&nbsp;&nbsp;&nbsp;[`balancing`](#balancing-data) | balanced \| unbalanced |
| `flow:` | | |
| &nbsp;&nbsp;&nbsp;&nbsp;[`distribution`](#distribution) | uniform \| burst |
| &nbsp;&nbsp;&nbsp;&nbsp;[`rate`](#rate) | integer |

#### size
{: .no_toc }

```yaml
- name: source
    synthetic:
      data:
        size: 8
```
The size in _Bytes_ of the mesage (as a String value) that will be generated by the source task.

#### values
{: .no_toc }

```yaml
- name: source
    synthetic:
      data:
        values: 5
```
How many unique values make up the data set.

#### distribution (data)
{: .no_toc }

```yaml
- name: source
    synthetic:
      data:
        distribution: uniform
```
In an abstracted way, it represents the probability of a value occurrence:
* `uniform`: each value is inserted in the urn only one time (equal probability)
* `nonuniform`: each values is inserted several time in the urn following the power of 2 (e.g. 1st element added once, 2nd element twice, 3rd element 4 times, and so on)


#### distribution (flow)
{: .no_toc }

```yaml
- name: source
    synthetic:
      flow:
        distribution: uniform
```
It represent the rate distribution over time:
* `uniform`: the rate will be a CBR (Constant Bitrate), constant interval time between messages
* `burst`: the rate will be a CBR for most of the time, intervalled by periods without rate limitation

#### rate
{: .no_toc }

```yaml
datastream:
    synthetic:
        flow:
            rate: 100
```
The number of messages per second that will be generated. The max value is 1000, as `sleep` cannot go under 1ms. If the value is set to 0 there won't be any rate limitation.

## Processing Task Definition

At the same manner, the tasks will be defined as a **ordered** list.

```yaml
pipeline:
    tasks:
        - name: source
          ...

        - --> here <--
```

| Property | Value |
|:----|:----|
| [`routing`](#routing) | balanced \| hash \| broadcast |
| [`processing`](#processing) | double |
| [`filtering`](#filtering) | double |
| [`resizedata`](#resizedata) | integer |
| [`parents`](#parents) | list |

N.B. Windowing is currenctly supported by the configuration parser, but not yet implemented in the application builder.
{: .text-red-000}

#### routing
{: .no_toc }

```yaml
- name: task
  routing: hash
```
Defines the type of connection of the current task to the previous one:
* `none`: without specifying a routing method, it will be applied the default one for each platform
* `balanced`: the task balances the routing of the messages in a balanced (e.g. round-robin) way to the following task instances
* `hash`: an hash-based function is used to decide the next task instance to where route the message
* `broadcast`: each message is replicate over all the following task instances

Currently direct operator connection in Flink, and shuffle grouping in Storm and Heron.
{: .text-red-000 }

#### processing
{: .no_toc }

```yaml
- name: task
  processing: 10
```
It represent the CPU load of the task. The integer value represent the number of cycles the busywait will perform.

To better understand how the value has been computed check the section relative to the [load generator](/project/implementation/load-generator).

#### filtering
{: .no_toc }

```yaml
- name: task
  filtering: 0
```
The value express the percentage (normalized to 1) of filtered data. 
Out of total of _x_ input values, the sink will output _filtering * x_ values.

#### resizedata
{: .no_toc }

```yaml
- name: task
  resizedata: 15
```
It defines the size in Bytes of the emitted data from the task, different from the input one. It represent a data transformation.

N.B. To not excessively overload the task, in the current NAMB *v0.6.0*, it is only possible to reduce datasize.
{: .text-red-000}

#### parents
{: .no_toc }

```yaml
- name: children
  parents:
  - parent_one
  - parent_two
```
This tag will list all the parents of the current child. Defining which tasks are connected to the current one; i.e. from which tasks the data will come from in the current task.