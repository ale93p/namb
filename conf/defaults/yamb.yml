###############################################
# DATAFLOW: application (DAG) properties     #
###############################################

dataflow:
  ## DAG Depth
  depth: 3

  ## Scalability
  scalability:
    parallelism: 10 # Total number of executors
    balancing: balanced # [balanced, increasing, decreasing, pyramid]
    variability: 0.5 # balancing variability used during load distribution
  
  ## Connection and Dependency
  connection: 
    shape: linear #[linear, diamond, star]
    ## Traffic Balancing
    routing: balanced # [balanced, hash, broadcast]

  ## Message Reliability
  reliable: true # Boolean, true to enable "acking-like" mechanism, false otherwise

  ## Windowing
  windowing:
    enabled: false
    type: tumbling # [tumbling, sliding]
    duration: 30 # window duration in seconds
    interval: 10 # interval between windows, enabled only if sliding

  ## Processing
  workload:
    processing: 300 # CPU load value
    balancing: balanced # [balanced, increasing, decreasing, pyramid]

  filtering: 0 # percentage of filtered data [0: output=100% input, 0.3: output=70% of input, and so on]

  pipeline:
  - name: sourcy
    type: source # [source, task]
    parallelism: 1
    routing: balanced
    processing: 5.5
  - name: second
    type: task
    parallelism: 1
    routing: hash
    processing: 6.5
    parents:
    - sourcy
  - name: third
    type: task
    parallelism: 1
    routing: hash
    processing: 6.5
    parents:
    - sourcy
  - name: last
    type: task
    parallelism: 2
    processing: 4
    filtering: 0.2
    parents:
    - second
    - third


###############################################
# DATA_STREAM: input data properties          #
###############################################


# TODO: define if autogenerated or external
datastream:
## Tuple Characteristics
# IMPORTANT: Leave uncommented the section related to the kind of
#             input data that you want to use
# + synthetic: data generated by spout (or equivalent)
# + external: data source connected (kafka, ...)

  synthetic:
    data:
      size: 8 # size of the single data
      values: 100 # different values
      distribution: uniform # [uniform, nonuniform]
    ## Input Ratio
    flow:
      distribution: uniform # [unifrom, burst, saw-tooth, normal, bimodal]
      rate: 1000 # msg/s: max value is 1000 (1 each ms), 0 is without pause between packages
  
  #TODO: check needed configurations, e.g. kafka topics
  # WARNING: this section has nit yet being implemented
  # kafka:
  #   host: 127.0.0.1
  #   port: 1234
  #   topic: test_topic
  #   size: 8 # ??
  #   data_type: text
